# actualizacion en base de datos (scripts)

# script de la tabla de temperatura
	-- Volcando estructura para tabla pos.temp_habitaciones
	CREATE TABLE IF NOT EXISTS `temp_habitaciones` (
	  `id` int(11) NOT NULL AUTO_INCREMENT,
	  `nombre` varchar(50) DEFAULT NULL,
	  `temp` varchar(50) DEFAULT NULL,
	  `hum` varchar(50) DEFAULT NULL,
	  `tvo` varchar(50) DEFAULT NULL,
	  PRIMARY KEY (`id`)
	) ENGINE=InnoDB AUTO_INCREMENT=7 DEFAULT CHARSET=utf8mb4;

	# se crean datos de ejemplo.

	-- Volcando datos para la tabla pos.temp_habitaciones: ~5 rows (aproximadamente)
	/*!40000 ALTER TABLE `temp_habitaciones` DISABLE KEYS */;
	INSERT INTO `temp_habitaciones` (`id`, `nombre`, `temp`, `hum`, `tvo`) VALUES
	  (1, 'Fabian', '20c°', '15', '12'),
	  (2, 'Chile', '25c°', '16', '8'),
	  (3, 'German', '55c°', '66', '10'),
	  (5, 'oscar', '25c°', '25%', '25%');
	/*!40000 ALTER TABLE `temp_habitaciones` ENABLE KEYS */;



	#script de la tabla iluminacion
	-- Volcando estructura para tabla domotica.iluminacion
	CREATE TABLE IF NOT EXISTS `iluminacion` (
 	 `id_bombillo` int(11) NOT NULL AUTO_INCREMENT,
 	 `nombre` varchar(50) DEFAULT NULL,
  	`encendido` int(11) DEFAULT NULL,
 	 `color` varchar(50) DEFAULT NULL,
 	 `intensidad` int(11) DEFAULT NULL,
 	 `estado` int(11) DEFAULT NULL,
 	 PRIMARY KEY (`id_bombillo`)
	) ENGINE=InnoDB AUTO_INCREMENT=4 DEFAULT CHARSET=utf8mb4;

	-- Volcando datos para la tabla domotica.iluminacion: ~1 rows (aproximadamente)
	/*!40000 ALTER TABLE `iluminacion` DISABLE KEYS */;
	INSERT INTO `iluminacion` (`id_bombillo`, `nombre`, `encendido`, `color`, `intensidad`, `estado`) VALUES
	(3, 'habitacion mia', 1, '#c41717', 9, 0);
	/*!40000 ALTER TABLE `iluminacion` ENABLE KEYS */;


	CREATE TABLE IF NOT EXISTS `estadisticas` (
  `IdBombillo` int(11) NOT NULL,
  `Estado` int(11) DEFAULT NULL,
  `fecha` timestamp NULL DEFAULT NULL,
  PRIMARY KEY (`IdBombillo`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_spanish_ci;

-- Volcando datos para la tabla domotica.estadisticas: ~10 rows (aproximadamente)
/*!40000 ALTER TABLE `estadisticas` DISABLE KEYS */;
INSERT INTO `estadisticas` (`IdBombillo`, `Estado`, `fecha`) VALUES
	(1, 1, '2020-10-27 16:46:49'),
	(2, 1, '2020-10-27 16:47:07'),
	(3, 0, '2020-12-27 17:06:23'),
	(4, 0, '2020-10-27 17:06:45'),
	(5, 1, '2020-10-27 17:06:58'),
	(6, 0, '2020-10-27 17:07:18'),
	(7, 1, '2020-10-27 17:07:56'),
	(8, 0, '2020-10-27 17:08:13'),
	(9, 1, '2020-10-27 17:08:23'),
	(10, 0, '2020-10-27 17:08:36');
/*!40000 ALTER TABLE `estadisticas` ENABLE KEYS */;

# script de la tabla de ventanas

-- Volcando estructura para tabla pos.registro_ventana_abierta
CREATE TABLE IF NOT EXISTS `registro_ventana_abierta` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `id_ventana` bigint(20) DEFAULT NULL,
  `usuario` text DEFAULT NULL,
  `fecha_inicio` datetime DEFAULT NULL,
  `fecha_final` datetime DEFAULT NULL,
  `duracion` float DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `id_ventana` (`id_ventana`),
  CONSTRAINT `FK_registro_ventana_abierta_ventana` FOREIGN KEY (`id_ventana`) REFERENCES `ventana` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4;

-- Volcando datos para la tabla pos.registro_ventana_abierta: ~0 rows (aproximadamente)
/*!40000 ALTER TABLE `registro_ventana_abierta` DISABLE KEYS */;
/*!40000 ALTER TABLE `registro_ventana_abierta` ENABLE KEYS */;

-- Volcando estructura para tabla pos.registro_ventana_limpieza
CREATE TABLE IF NOT EXISTS `registro_ventana_limpieza` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `id_ventana` bigint(20) DEFAULT NULL,
  `consumo_agua` float DEFAULT NULL,
  `tipo_limpieza` varchar(50) DEFAULT NULL,
  `fecha_inicio` datetime DEFAULT NULL,
  `fecha_final` datetime DEFAULT NULL,
  `duracion` float DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_registro_ventana_limpieza_ventana` (`id_ventana`),
  CONSTRAINT `FK_registro_ventana_limpieza_ventana` FOREIGN KEY (`id_ventana`) REFERENCES `ventana` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8mb4;

-- Volcando datos para la tabla pos.registro_ventana_limpieza: ~0 rows (aproximadamente)
/*!40000 ALTER TABLE `registro_ventana_limpieza` DISABLE KEYS */;
/*!40000 ALTER TABLE `registro_ventana_limpieza` ENABLE KEYS */;

-- Volcando estructura para tabla pos.registro_ventana_rotas
CREATE TABLE IF NOT EXISTS `registro_ventana_rotas` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `id_ventana` bigint(20) DEFAULT NULL,
  `descripcion` text DEFAULT NULL,
  `fecha` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_registro_ventana_rotas_ventana` (`id_ventana`),
  CONSTRAINT `FK_registro_ventana_rotas_ventana` FOREIGN KEY (`id_ventana`) REFERENCES `ventana` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8mb4;

-- Volcando datos para la tabla pos.registro_ventana_rotas: ~0 rows (aproximadamente)
/*!40000 ALTER TABLE `registro_ventana_rotas` DISABLE KEYS */;
/*!40000 ALTER TABLE `registro_ventana_rotas` ENABLE KEYS */;

-- Volcando estructura para tabla pos.ventana
CREATE TABLE IF NOT EXISTS `ventana` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT,
  `referencia` text DEFAULT NULL,
  `ubicacion` text DEFAULT NULL,
  `usuario_permitidos` text DEFAULT NULL,
  `dias_limpieza` varchar(100) DEFAULT NULL,
  `hora_limpieza` time DEFAULT NULL,
  `foto_ventana` varchar(50) DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=20 DEFAULT CHARSET=utf8mb4;

-- Volcando datos para la tabla pos.ventana: ~2 rows (aproximadamente)
/*!40000 ALTER TABLE `ventana` DISABLE KEYS */;
INSERT INTO `ventana` (`id`, `referencia`, `ubicacion`, `usuario_permitidos`, `dias_limpieza`, `hora_limpieza`, `foto_ventana`) VALUES
	(18, 'ventana A', 'Baño', 'juan,andres,monica', 'Miercoles,Jueves,Viernes', '11:45:00', 'images/ventanas/ventana A/381.jpg'),
	(19, 'ventana B', 'sala ', 'andres,german', 'Martes,Jueves', '11:45:00', 'images/ventanas/ventana B/214.jpg');
/*!40000 ALTER TABLE `ventana` ENABLE KEYS */;

/*!40101 SET SQL_MODE=IFNULL(@OLD_SQL_MODE, '') */;
/*!40014 SET FOREIGN_KEY_CHECKS=IF(@OLD_FOREIGN_KEY_CHECKS IS NULL, 1, @OLD_FOREIGN_KEY_CHECKS) */;
/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
>>>>>>> ventanas

